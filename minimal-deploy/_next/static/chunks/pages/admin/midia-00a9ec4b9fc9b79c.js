(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{2934:function(a,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/midia",function(){return s(2053)}])},2053:function(a,e,s){"use strict";s.r(e);var i=s(5893),n=s(7294),t=s(1163),d=s(1664),l=s.n(d),o=s(4327),r=s.n(o),c=s(7022),m=s.n(c);e.default=()=>{var a;let e=(0,t.useRouter)(),[s,d]=(0,n.useState)(null),[o,c]=(0,n.useState)([]),[_,h]=(0,n.useState)(!1),[u,p]=(0,n.useState)(0),[f,x]=(0,n.useState)(""),[A,v]=(0,n.useState)([]),[g,j]=(0,n.useState)(null),D=[{id:"1",name:"documentario_sinais_dos_tempos.mp4",size:"2.4 GB",type:"video/mp4",uploadDate:"2024-08-20",status:"processed",thumbnail:"/images/Scene_01.png",manifestHLS:"/vod/hls/sinais_dos_tempos/master.m3u8",manifestDASH:"/vod/dash/sinais_dos_tempos/manifest.mpd"},{id:"2",name:"curso_escatologia_aula01.mp4",size:"1.8 GB",type:"video/mp4",uploadDate:"2024-08-19",status:"processing",thumbnail:"/images/Scene_02.png"},{id:"3",name:"revista_apocalypse_insights_01.pdf",size:"45 MB",type:"application/pdf",uploadDate:"2024-08-18",status:"ready",thumbnail:"/images/Scene_03.png"}];(0,n.useEffect)(()=>{(()=>{let a=localStorage.getItem("adminUser");if(!a){e.push("/admin/login");return}d(JSON.parse(a))})(),c(D)},[e]);let N=(0,n.useCallback)(a=>{a.preventDefault(),a.stopPropagation()},[]),b=(0,n.useCallback)(a=>{a.preventDefault(),a.stopPropagation();let e=Array.from(a.dataTransfer.files);handleFileUpload(e)},[]),handleFileUpload=async a=>{h(!0),p(0);for(let e=0;e<a.length;e++){let s=a[e];for(let a=0;a<=100;a+=10)p(a),await new Promise(a=>setTimeout(a,100));let i={id:Date.now()+e,name:s.name,size:formatFileSize(s.size),type:s.type,uploadDate:new Date().toISOString().split("T")[0],status:s.type.startsWith("video/")?"processing":"ready",thumbnail:"/images/Scene_04.png"};c(a=>[i,...a])}h(!1),p(0)},formatFileSize=a=>{if(0===a)return"0 Bytes";let e=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,e)).toFixed(2))+" "+["Bytes","KB","MB","GB"][e]},generateSignedUrl=async a=>{let e="https://storage.googleapis.com/apocalypse-academy-bucket/preview/".concat(a,"?X-Goog-Algorithm=GOOG4-RSA-SHA256&X-Goog-Credential=...&X-Goog-Date=20240822T000000Z&X-Goog-Expires=3600&X-Goog-SignedHeaders=host&X-Goog-Signature=...");j(e)},I=o.filter(a=>a.name.toLowerCase().includes(f.toLowerCase()));return s?(0,i.jsxs)("div",{className:r().adminLayout,children:[(0,i.jsxs)("aside",{className:r().sidebar,children:[(0,i.jsx)("div",{className:r().logo,children:(0,i.jsx)("h2",{children:"APOCALYPSE ADMIN"})}),(0,i.jsxs)("nav",{className:r().navigation,children:[(0,i.jsxs)(l(),{href:"/admin",className:r().navItem,children:[(0,i.jsx)("span",{className:r().navIcon,children:"\uD83D\uDCCA"}),"Dashboard"]}),(0,i.jsxs)(l(),{href:"/admin/catalogo",className:r().navItem,children:[(0,i.jsx)("span",{className:r().navIcon,children:"\uD83C\uDFAC"}),"Cat\xe1logo"]}),(0,i.jsxs)(l(),{href:"/admin/midia",className:"".concat(r().navItem," ").concat(r().active),children:[(0,i.jsx)("span",{className:r().navIcon,children:"☁️"}),"M\xeddia"]}),(0,i.jsxs)(l(),{href:"/admin/usuarios",className:r().navItem,children:[(0,i.jsx)("span",{className:r().navIcon,children:"\uD83D\uDC65"}),"Usu\xe1rios"]}),(0,i.jsxs)(l(),{href:"/admin/relatorios",className:r().navItem,children:[(0,i.jsx)("span",{className:r().navIcon,children:"\uD83D\uDCC8"}),"Relat\xf3rios"]})]}),(0,i.jsxs)("div",{className:r().userInfo,children:[(0,i.jsx)("div",{className:r().userAvatar,children:(null===(a=s.name)||void 0===a?void 0:a.charAt(0))||"A"}),(0,i.jsxs)("div",{className:r().userDetails,children:[(0,i.jsx)("span",{className:r().userName,children:s.name||"Admin"}),(0,i.jsx)("span",{className:r().userRole,children:s.role||"Administrador"})]})]})]}),(0,i.jsxs)("main",{className:r().mainContent,children:[(0,i.jsxs)("header",{className:r().header,children:[(0,i.jsx)("h1",{children:"Gerenciamento de M\xeddia"}),(0,i.jsxs)("div",{className:r().headerActions,children:[(0,i.jsx)("button",{className:r().notificationBtn,children:"\uD83D\uDD14"}),(0,i.jsx)("button",{className:r().logoutBtn,onClick:()=>{localStorage.removeItem("adminUser"),e.push("/admin/login")},children:"Sair"})]})]}),(0,i.jsxs)("div",{className:m().uploadArea,onDragOver:N,onDrop:b,children:[(0,i.jsxs)("div",{className:m().uploadContent,children:[(0,i.jsx)("div",{className:m().uploadIcon,children:"☁️"}),(0,i.jsx)("h3",{children:"Arraste arquivos aqui ou clique para selecionar"}),(0,i.jsx)("p",{children:"Suporte para v\xeddeos (MP4, MOV), PDFs e imagens"}),(0,i.jsx)("input",{type:"file",multiple:!0,accept:"video/*,application/pdf,image/*",onChange:a=>handleFileUpload(Array.from(a.target.files)),className:m().fileInput}),(0,i.jsx)("button",{className:m().uploadBtn,onClick:()=>document.querySelector(".".concat(m().fileInput)).click(),children:"Selecionar Arquivos"})]}),_&&(0,i.jsxs)("div",{className:m().uploadProgress,children:[(0,i.jsx)("div",{className:m().progressBar,children:(0,i.jsx)("div",{className:m().progressFill,style:{width:"".concat(u,"%")}})}),(0,i.jsxs)("span",{children:[u,"% enviado"]})]})]}),(0,i.jsxs)("div",{className:m().searchSection,children:[(0,i.jsxs)("div",{className:m().searchBox,children:[(0,i.jsx)("input",{type:"text",placeholder:"Buscar arquivos...",value:f,onChange:a=>x(a.target.value),className:m().searchInput}),(0,i.jsx)("button",{className:m().searchBtn,children:"\uD83D\uDD0D"})]}),(0,i.jsxs)("div",{className:m().filters,children:[(0,i.jsxs)("select",{className:m().filterSelect,children:[(0,i.jsx)("option",{value:"",children:"Todos os tipos"}),(0,i.jsx)("option",{value:"video",children:"V\xeddeos"}),(0,i.jsx)("option",{value:"pdf",children:"PDFs"}),(0,i.jsx)("option",{value:"image",children:"Imagens"})]}),(0,i.jsxs)("select",{className:m().filterSelect,children:[(0,i.jsx)("option",{value:"",children:"Todos os status"}),(0,i.jsx)("option",{value:"ready",children:"Pronto"}),(0,i.jsx)("option",{value:"processing",children:"Processando"}),(0,i.jsx)("option",{value:"processed",children:"Processado"})]})]})]}),(0,i.jsx)("div",{className:m().filesGrid,children:I.map(a=>(0,i.jsxs)("div",{className:m().fileCard,children:[(0,i.jsxs)("div",{className:m().fileThumbnail,children:[(0,i.jsx)("img",{src:a.thumbnail,alt:a.name}),(0,i.jsxs)("div",{className:m().fileOverlay,children:[(0,i.jsx)("button",{className:m().previewBtn,onClick:()=>generateSignedUrl(a.id),children:"\uD83D\uDC41️"}),(0,i.jsx)("button",{className:m().downloadBtn,children:"⬇️"})]})]}),(0,i.jsxs)("div",{className:m().fileInfo,children:[(0,i.jsx)("h4",{className:m().fileName,children:a.name}),(0,i.jsxs)("div",{className:m().fileMeta,children:[(0,i.jsx)("span",{className:m().fileSize,children:a.size}),(0,i.jsx)("span",{className:m().fileDate,children:a.uploadDate})]}),(0,i.jsx)("div",{className:m().fileStatus,children:(0,i.jsxs)("span",{className:"".concat(m().statusBadge," ").concat(m()[a.status]),children:["ready"===a.status&&"✅ Pronto","processing"===a.status&&"⏳ Processando","processed"===a.status&&"\uD83C\uDFAC Processado"]})}),a.manifestHLS&&(0,i.jsxs)("div",{className:m().manifests,children:[(0,i.jsxs)("div",{className:m().manifestItem,children:[(0,i.jsx)("span",{children:"HLS:"}),(0,i.jsx)("code",{children:a.manifestHLS})]}),(0,i.jsxs)("div",{className:m().manifestItem,children:[(0,i.jsx)("span",{children:"DASH:"}),(0,i.jsx)("code",{children:a.manifestDASH})]})]})]})]},a.id))}),(0,i.jsxs)("div",{className:m().storageStats,children:[(0,i.jsx)("h3",{children:"Estat\xedsticas de Armazenamento"}),(0,i.jsxs)("div",{className:m().statsGrid,children:[(0,i.jsxs)("div",{className:m().statItem,children:[(0,i.jsx)("span",{className:m().statLabel,children:"Total de Arquivos:"}),(0,i.jsx)("span",{className:m().statValue,children:o.length})]}),(0,i.jsxs)("div",{className:m().statItem,children:[(0,i.jsx)("span",{className:m().statLabel,children:"Espa\xe7o Usado:"}),(0,i.jsx)("span",{className:m().statValue,children:"847 GB"})]}),(0,i.jsxs)("div",{className:m().statItem,children:[(0,i.jsx)("span",{className:m().statLabel,children:"Espa\xe7o Dispon\xedvel:"}),(0,i.jsx)("span",{className:m().statValue,children:"1.2 TB"})]})]})]})]})]}):(0,i.jsx)("div",{className:r().loading,children:"Verificando autentica\xe7\xe3o..."})}},4327:function(a){a.exports={adminLayout:"AdminDashboard_adminLayout__X8hMb",sidebar:"AdminDashboard_sidebar__aQTSB",logo:"AdminDashboard_logo__Z0xha",navigation:"AdminDashboard_navigation__W7uig",navItem:"AdminDashboard_navItem__fMEBY",active:"AdminDashboard_active__CRzrg",navIcon:"AdminDashboard_navIcon__wPbFO",userInfo:"AdminDashboard_userInfo__rFI_X",userAvatar:"AdminDashboard_userAvatar__JUmDg",userDetails:"AdminDashboard_userDetails__Oh3VF",userName:"AdminDashboard_userName__MQ8gL",userRole:"AdminDashboard_userRole__2JTHe",mainContent:"AdminDashboard_mainContent__YfMof",header:"AdminDashboard_header__bWPvL",headerActions:"AdminDashboard_headerActions__i3woJ",notificationBtn:"AdminDashboard_notificationBtn__Qcrdo",logoutBtn:"AdminDashboard_logoutBtn__TJng9",statsGrid:"AdminDashboard_statsGrid__Z4zKW",statCard:"AdminDashboard_statCard__UIj_W",statIcon:"AdminDashboard_statIcon__4bDHu",statContent:"AdminDashboard_statContent__3oLTL",statNumber:"AdminDashboard_statNumber__lVhWa",statChange:"AdminDashboard_statChange__9wwIt",recentActivity:"AdminDashboard_recentActivity__0kCCo",activityList:"AdminDashboard_activityList__XQ9zS",activityItem:"AdminDashboard_activityItem__q_e2b",activityIcon:"AdminDashboard_activityIcon__fbyxC",activityContent:"AdminDashboard_activityContent__WFmSO",activityTime:"AdminDashboard_activityTime__QB7RM",quickActions:"AdminDashboard_quickActions__r7UYq",actionButtons:"AdminDashboard_actionButtons__d3h_k",actionBtn:"AdminDashboard_actionBtn__nKV4y",actionIcon:"AdminDashboard_actionIcon__Ecty4",loading:"AdminDashboard_loading__z5RIV"}},7022:function(a){a.exports={uploadArea:"AdminMedia_uploadArea__1kgAI",uploadContent:"AdminMedia_uploadContent__Tb11n",uploadIcon:"AdminMedia_uploadIcon__12oHz",fileInput:"AdminMedia_fileInput__nLzbl",uploadBtn:"AdminMedia_uploadBtn__UJ1Qe",uploadProgress:"AdminMedia_uploadProgress__ER4RJ",progressBar:"AdminMedia_progressBar__eNwhL",progressFill:"AdminMedia_progressFill__74cNG",searchSection:"AdminMedia_searchSection__c4N6U",searchBox:"AdminMedia_searchBox__mEH69",searchInput:"AdminMedia_searchInput__V8A5P",searchBtn:"AdminMedia_searchBtn__3GbNF",filters:"AdminMedia_filters__JRxcw",filterSelect:"AdminMedia_filterSelect__fdDAu",filesGrid:"AdminMedia_filesGrid__Cj4_N",fileCard:"AdminMedia_fileCard__EOq8P",fileThumbnail:"AdminMedia_fileThumbnail__TB0ug",fileOverlay:"AdminMedia_fileOverlay__fGk_E",previewBtn:"AdminMedia_previewBtn__qcYi1",downloadBtn:"AdminMedia_downloadBtn__oWyd7",fileInfo:"AdminMedia_fileInfo__SZBkR",fileName:"AdminMedia_fileName__OuTqT",fileMeta:"AdminMedia_fileMeta__scAyo",fileSize:"AdminMedia_fileSize__QvliD",fileDate:"AdminMedia_fileDate__AKfq8",fileStatus:"AdminMedia_fileStatus__j2PI3",statusBadge:"AdminMedia_statusBadge__Od_rX",ready:"AdminMedia_ready__RUdpl",processing:"AdminMedia_processing__BVgkY",processed:"AdminMedia_processed__g9KMW",manifests:"AdminMedia_manifests__d4CSx",manifestItem:"AdminMedia_manifestItem__OfqLs",storageStats:"AdminMedia_storageStats__fnfi0",statsGrid:"AdminMedia_statsGrid__T9zk0",statItem:"AdminMedia_statItem__oBYna",statLabel:"AdminMedia_statLabel__UpV4M",statValue:"AdminMedia_statValue__0hvJH"}},1163:function(a,e,s){a.exports=s(9974)}},function(a){a.O(0,[664,774,888,179],function(){return a(a.s=2934)}),_N_E=a.O()}]);